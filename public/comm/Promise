var b=this,d=b.Array,g=b.setTimeout,h=b.Function,i=b.console,j=b.Error,e=function(a){return typeof a==='function'};if(b.Promise)var a=b.Promise;else{var c=function(b){return b instanceof a||b&&e(b.then)&&e(b['catch'])},f=function(l,m,n,o){var e,f,c,d,b,g=function(a,b){e?a.apply(null,e):f?b.apply(null,f):(c=a,d=b)},h=new a(g),i=function(){if(!b){try{var a=m.apply(null,arguments);c?c(a):e=[a]}catch(a){d?d(a):f=[a]}b=!0}},j=function(){b||(c?c.apply(null,arguments):e=arguments,b=!0)},k=function(){b||(d?d.apply(null,arguments):f=arguments,b=!0)};return l.push(i),n.push(j),o.push(k),h},a=function(j){var a=this,h=this.PromiseFulfillReactions=[],i=this.PromiseRejectReactions=[],d=this.oked,e=this.ohed,f=function(e){c(e)?e.then(f)['catch'](b):(d=a.oked=arguments,a.run(h,d))},b=function(b){e=a.ohed=arguments,a.run(i,e)};g(function(){try{j(f,b)}catch(a){b(a)}},0)};a.prototype={then:function(b){var a=f(this.PromiseFulfillReactions,b,this.PromiseFulfillReactions,this.PromiseRejectReactions);return this.oked&&this.run(this.PromiseFulfillReactions,this.oked),this.ohed&&this.run(this.PromiseRejectReactions,this.ohed),a},'catch':function(b){var a=f(this.PromiseRejectReactions,b,this.PromiseFulfillReactions,this.PromiseRejectReactions);return this.ohed&&this.run(this.PromiseRejectReactions,this.ohed),this.oked&&this.run(this.PromiseFulfillReactions,this.oked),a},run:function(b,c){do{var a=b.shift();a instanceof h&&a.apply(null,c)}while(b.length);this.PromiseRejectReactions.splice(0),this.PromiseFulfillReactions.splice(0)}},a.all=function(b){return new a(function(h,j){if(!(b&&b.length))return h();try{var i=0,k=0,e=d(b.length);for(var a=0,g=b.length;a<g;a++){var f=b[a];c(f)?(f.then(function(a){return function(b){e[a]=b,++i===g&&h(e)}}(a)),f['catch'](function(a){k++===0&&j(a)})):(e[a]=f,++i===g&&h(e))}}catch(a){j(a)}})},a.race=function(b){return new a(function(k,g){try{var h=0,i=0,j=d(b.length);for(var a=0,f=b.length;a<f;a++){var e=b[a];c(e)?e.then(function(a){return function(a){++h===0&&k(a)}}(a))['catch'](function(a){i++===f&&g(a)}):j[a]=e}}catch(a){g(a)}})},a.reject=function(b){return new a(function(c,a){a(b)})},a.resolve=function(){var b=arguments;return new a(function(a,c){a.apply(null,b)})}}return a