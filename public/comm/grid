0ewMath,addClass,div,extend,getScreenPosition,css,parseInt,onappend,onmousemove,window,onremove,onmousedown,onmouseup,removeClass,Array,Error,Object,getIndexFromOrderedArray,saveToOrderedArray,appendChild,isElement,care,cless,d,i,j,r,k,e,b,s,t,l,u,v,w,f,m,x,F,y,z,A,B,C,Dfunction n(g){var a=this||j();if(r(a,q),!g)var g=h([0,[0,100,200],90,230,[200,230,[230,290],300],320]);a.breakpoints=g,a.setAttribute('grid','');var i=function(h){var g=k(a),d=h.clientX-g.left,f=h.clientY-g.top,c=a.nearby(d,f),i=c[0],j=c[1],l=c[2],m=c[3],b='';f-j<7?b+='n':m-f<7&&(b+='s'),d-i<7?b+='w':l-d<7&&(b+='e'),a.direction=b,b?e('[grid]','cursor:'+b+'-resize'):e('[grid]','cursor:default;')},m=function(o){var g=a.editting;for(var h in g){var c=g[h],l=c[0],i=c[1],m=c[2],f=c[3],j=c[4],k=c[5],n=c[6],e=c[7],d=o[h]-n;d<j&&(d=j),d>k&&(d=k),l.forEach(function(a){return a.value=d}),m.forEach(function(g){var a=g.style;if(e){var c=b(a[f]);a[e]=b(a[e])+c-d+'px'}a[f]=d+'px'}),i&&i.forEach(function(g){var a=g.style,c=b(a[f])+b(a[e]);a[e]=b(a[e])-c+d+'px'})}},d;return s(a,function(){a.init(),d&&d(),d=t(l,function(b){a.editting?m(b):i(b)})}),u(a,function(){d(),d=null}),v(a,function(e){if(!a.direction)return;var i=k(a),g=e.clientX-i.left,h=e.clientY-i.top,b=a.nearby(g,h),j=b[0],m=b[1],n=b[2],o=b[3],d={};h-m<7?c('y','top','bottom','height',b.top,e,d):o-h<7&&c('y','top','bottom','height',b.bottom,e,d),g-j<7?c('x','left','right','width',b.left,e,d):n-g<7&&c('x','left','right','width',b.right,e,d),a.editting=d;var p=w(l,function(){var e=a.editting.target;e&&(e.style.zIndex=null);var b=d.clientX,c=d.clientY;d=null,b&&(b[1].forEach(function(a){return f(a,'border-right')}),b[2].forEach(function(a){return f(a,'border-left')})),c&&(c[1].forEach(function(a){return f(a,'border-bottom')}),c[2].forEach(function(a){return f(a,'border-top')})),a.editting=null,p()})}),a}function E(a){return B(a)?(C(a,function(a){n.call(this,a)}),a):n(a)}var o=function(a,e,f){while(a&&a.parent&&a.parent.parent&&a.parent.parent.value===a.value)a=a.parent.parent;var c=[],b=[a];while(b.length){var d=b.shift();c.push(d),d.forEach(function(c){c.length>1&&c[0].value===a.value&&b.push(c[0])})}return c},p=function(a,b,f){while(a&&a.parent&&a.parent.parent&&a.parent.parent[b]&&a.parent.parent[b].value===a[b].value)a=a.parent.parent;var c=[a],d=[];while(c.length){var e=c.shift();d.push(e),e.forEach(function(d){var e=d[d.length-1];d.length>1&&e[b]&&e[b].value===a[b].value&&c.push(d[d.length-1])})}return d},g=function(b){var a=b.map(function(a){return a.target?a.target:a.filter(function(a){return!!a.target}).map(function(a){return a.target})});return[].concat.apply([],a)},c=function(h,e,a,r,b,s,t){var c=b[e];if(!c)return;var f=o(b.direction!==h?b.parent:b,a,e),j=p(c.direction!==h?c.parent:c,a),k='client'+h.toUpperCase(),n=d.max.apply(d,j.map(function(a){return a.value||0}))+20,q=d.min.apply(d,f.map(function(b){return b[a]?b[a].value-20:Infinity})),l=g(f),m=g(j);m.forEach(function(b){i(b,'border-'+a)}),l.forEach(function(a){i(a,'border-'+e)}),t[k]=[f,m,l,e,n,q,s[k]-b.value,r]},a=function(b){var a=[];return a.value=b,a},h=function(c,d,b){d===void 0&&(d='x'),b===void 0&&(b=a(0)),!c instanceof m&&(c=arguments);for(var e=0,i=c.length;e<i;e++){var f=c[e];if(f instanceof m){if(!b.length)throw new x('\u6570\u636e\u8f6c\u6362\u4e3agrid\u5931\u8d25\uff01');h(f,d==='x'?'y':'x',b[b.length-1])}else{var g=a(f);g.direction=d,g.parent=b,b.push(g)}}return b},q={breakpoints:[],init:function(){this.reshape()},reshape:function(){var k=this,b,c,h,i,g=this.breakpoints.direction,d=a(k.offsetWidth),f=a(k.offsetHeight),l=function(a,x,p){var m=p?p[x+1]:null;if(a.length){var q=b,r=c,s=h,t=i,u=g,v=d,w=f;g==='x'?(g='y',b=a,m?(h=m.value-a.value+'px',m.left=a,a.right=m,d=m):h=d.value-a.value+'px',a[0].top=c&&c.top):(g='x',c=a,m?(i=m.value-a.value+'px',f=m,m.top=a,a.bottom=m):i=f.value-a.value+'px',a[0].left=b&&b.left),a.map(l),b=q,c=r,h=s,i=t,g=u,d=v,f=w}else{var n=a.target;n||(a.target=n=j());var o;g==='x'?(m?(o=m.value-a.value,a.right=m,m.left=a):(o=d.value-a.value,a.right=d),a.top=c,a.bottom=f,e(n,{left:a.value+'px',top:c?c.value+'px':0,width:o+'px',height:i||0})):(m?(o=m.value-a.value,m.top=a,a.bottom=m):(o=f.value-a.value,a.bottom=f),a.left=b,a.right=d,e(n,{left:b?b.value+'px':0,top:a.value+'px',width:h||0,height:o+'px'})),A(k,n)}};this.breakpoints[0],l(this.breakpoints)},seprate:function(b){z(this.breakpoints,a(b))},nearby:function(l,m){var c=this.breakpoints,j=[],d=a(0),e=a(0),f=a(this.offsetWidth),g=a(this.offsetHeight),h=!0;do{var k=h?l:m,i=y(c,k);h?(d=c[i]||d,f=c[i+1]||f):(e=c[i]||e,g=c[i+1]||g),c=c[i]||[],j.push(c),h=!h}while(c.length);var b=[d.value,e.value,f.value,g.value];return b.l=b.left=d,b.t=b.top=e,b.b=b.bottom=g,b.r=b.right=f,b.w=b.width=f.value-d.value,b.h=b.height=g.value-e.value,b.p=b.path=j,b.d=b.direction=h?'x':'y',b}};return D(E,'.-wf{user-select:none;position:relative}.-wf>div{border:1px dashed #ccc;position:absolute}.-wf>div.resize{border-color:#66f;box-shadow:0 0 6px -2px rgba(0,0,0,0.3)}.-wf>div.border-left{border-left:1px solid #f6c}.-wf>div.border-right{border-right:1px solid #f6c}.-wf>div.border-top{border-top:1px solid #f6c}.-wf>div.border-bottom{border-bottom:1px solid #f6c}','-wf grid grid')